{
  "version": 8,
  "sources": {
    "prefectures": {
      "type": "vector",
      "url": "pmtiles:///hensachi-map/data/prefectures.pmtiles",
      "minzoom": 4,
      "maxzoom": 8,
      "attribution": "<a href='https://nlftp.mlit.go.jp/ksj/gml/datalist/KsjTmplt-N03-2025.html' target='_blank'>国土数値情報（行政区域）</a>"
    },
    "universities": {
      "type": "geojson",
      "data": "data/national_university.geojson",
      "attribution": "<a href='https://manabi.benesse.ne.jp/daigaku/hensachi/kokkoritsudai_index.html' target='_blank'>© Benesse Corporation</a>"
    },
    "universities_circle": {
      "type": "geojson",
      "data": "data/national_university_circle.geojson",
      "attribution": "<a href='https://manabi.benesse.ne.jp/daigaku/hensachi/kokkoritsudai_index.html' target='_blank'>© Benesse Corporation</a>"
    }
  },
  "glyphs": "font/{fontstack}/{range}.pbf",
  "layers": [
    {
      "id": "prefectures",
      "type": "fill",
      "source": "prefectures",
      "source-layer": "prefectures",
      "paint": {
        "fill-color": "#f2efe9",
        "fill-outline-color": "#dcd9d6"
      }
    },
    {
      "id": "universities",
      "type": "symbol",
      "source": "universities",
      "filter": [
        "any",
        [
          "!=",
          [
            "get",
            "rikei_hensachi"
          ],
          null
        ],
        [
          "!=",
          [
            "get",
            "bunkei_hensachi"
          ],
          null
        ]
      ],
      "layout": {
        "text-field": [
          "get",
          "name"
        ],
        "text-font": [
          "Noto Sans Regular"
        ],
        "text-size": 10.5,
        "text-variable-anchor": [
          "top",
          "bottom",
          "right",
          "left"
        ],
        "text-radial-offset": 0.9,
        "icon-image": [
          "step",
          [
            "coalesce",
            [
              "get",
              "rikei_hensachi"
            ],
            [
              "-",
              [
                "get",
                "bunkei_hensachi"
              ],
              7
            ]
          ],
          "C",
          50,
          "B",
          60,
          "A",
          65,
          "S",
          70,
          "SS"
        ],
        "icon-size": [
          "interpolate",
          [
            "linear"
          ],
          [
            "zoom"
          ],
          4,
          0.3,
          8,
          [
            "step",
            [
              "coalesce",
              [
                "get",
                "rikei_hensachi"
              ],
              [
                "-",
                [
                  "get",
                  "bunkei_hensachi"
                ],
                7
              ]
            ],
            0.5,
            60,
            0.6,
            65,
            0.7,
            70,
            0.8
          ]
        ],
        "symbol-placement": "point",
        "symbol-sort-key": [
          "-",
          [
            "coalesce",
            [
              "get",
              "bunkei_hensachi"
            ],
            [
              "get",
              "rikei_hensachi"
            ]
          ]
        ]
      },
      "minzoom": 4
    },
    {
      "id": "universities_circle",
      "type": "fill-extrusion",
      "source": "universities_circle",
      "paint": {
        "fill-extrusion-color": [
          "step",
          [
            "coalesce",
            [
              "get",
              "rikei_hensachi"
            ],
            [
              "-",
              [
                "get",
                "bunkei_hensachi"
              ],
              7
            ]
          ],
          "rgb(91, 155, 213)",
          50,
          "rgb(118, 166, 77)",
          60,
          "rgb(231, 99, 80)",
          65,
          "rgb(255, 247, 209)",
          70,
          "rgb(255, 217, 102)"
        ],
        "fill-extrusion-height": [
          "*",
          [
            "^",
            [
              "-",
              [
                "coalesce",
                [
                  "get",
                  "rikei_hensachi"
                ],
                [
                  "-",
                  [
                    "get",
                    "bunkei_hensachi"
                  ],
                  7
                ]
              ],
              50
            ],
            1.5
          ],
          1000
        ]
      },
      "layout": {
        "visibility": "visible"
      },
      "minzoom": 4
    }
  ]
}